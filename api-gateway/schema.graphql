# ================= USER SERVICE =================
type User {
    user_id: ID
    username: String
    fullname: String
    email: String
    role: String
}

type LoginResponse {
    access_token: String
    token_type: String
    user: User
}

# ================= WALLET SERVICE =================
type Wallet {
    walletId: String
    userId: String
    walletName: String
    balance: Float
    status: String
}

# ================= TRANSACTION SERVICE =================
enum TransactionType {
    DEPOSIT
    PAYMENT
    TRANSFER
}

type Transaction {
    transactionId: String
    userId: String
    walletId: String
    amount: Float
    type: TransactionType
    vaNumber: String
    status: String
    createdAt: String
}

input TransactionInput {
    walletId: String!
    amount: Float!
    type: TransactionType!
    vaNumber: String
}

# ================= FRAUD SERVICE =================
type FraudLog {
    logId: String
    userId: String
    amount: Float
    status: String
    reason: String
}

# ================= HISTORY SERVICE =================
type History {
    historyId: String
    transactionId: String
    userId: String
    amount: Float
    type: String
    status: String
    vaNumber: String
    createdAt: String
}

# ================= ROOT QUERY =================
type Query {
    # --- User ---
    myProfile(token: String!): User
    
    # --- Wallet ---
    myWallets: [Wallet]
    
    # --- Transaction ---
    myTransactions: [Transaction]
    
    # --- Fraud (Admin Only) ---
    getFraudLogs: [FraudLog]
    
    # --- History ---
    myHistory: [History]
}

# ================= ROOT MUTATION =================
type Mutation {
    # --- User ---
    registerUser(username: String!, fullname: String!, email: String!, password: String!): String
    loginUser(email: String!, password: String!): LoginResponse
    
    # --- Wallet ---
    createWallet(walletName: String!): Wallet
    
    # --- Transaction ---
    createTransaction(input: TransactionInput!): Transaction
    deleteAllTransactions: Boolean
    
    # --- Fraud (Admin Only) ---
    deleteFraudLog(logId: String!): String
    
    # --- History ---
    deleteHistory(historyId: String!): Boolean
}